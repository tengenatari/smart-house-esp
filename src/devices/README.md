# Devices
Каталог контроллеров и датчиков. Настройки и код.

<!-- [[[cog
import cog
cog.out(open("./relay/docs/README.md").read())
]]] -->
### Модуль управления реле

#### Схема цепи

[Проект Wokwi](https://wokwi.com/projects/456035055362315265)

![Схема цепи](/src/devices/relay/docs/circuit.png)

#### Описание

Для управления реле и связи с облачным сервером спользуется микроконтроллер ESP-32. 

Для индикации наличия связи с сервером используется залёный светодиод, подключённый к 0 цифровому пину ESP-32.

Реле имитирует исполняющие устройства, которые отсутствуют в эмуляции Wokwi. Реле подключено к 4 цифровому пину ESP-32.

#### Взаимодействие с сервером

Во время эмуляции микроконтроллер подключается к Wifi-сети, отправляет HTTP-запросы к серверу. В запросах отправляется текущее состояние реле. В качестве ответа получаем состояние, которое необходимо установить.

**Формат запросов:**

HTTP POST 

URL: /api/v1/имя_исполняющего_устройства/id

body:
```
{
    "active": true
}
```

**Формат ответов:**

HTTP 200 

body:
```
{
    "active": true
}
```
<!-- [[[end]]] -->

<!-- [[[cog
import cog
cog.out(open("./dht22/docs/README.md").read())
]]] -->
### Модуль температуры и влажности

#### Схема цепи

[Проект Wokwi](https://wokwi.com/projects/456108578902750209)

![Схема цепи](/src/devices/dht22/docs/circuit.png)

#### Описание

Для считывания показаний и связи с облачным сервером спользуется микроконтроллер ESP-32. 

Для индикации наличия связи с сервером используется залёный светодиод, подключённый к 0 цифровому пину ESP-32.

Датчик температуры и влажности подключён к 4 цифровому пину ESP-32.

Жидкокристалический экран служит для вывода показаний датчика. Также значения датчика передаются на сервер

#### Взаимодействие с сервером

Во время эмуляции микроконтроллер подключается к Wifi-сети, отправляет HTTP-запросы к серверу. В запросах отправляется текущее состояние датчика. Температура передаётся в целочисленном формате с учётом двух разрядов дробной части, например 2500 означает 25,00 градусов цельсия. Относительная влажность передаётся аналогичным образом, например 5000 означает 50.00 % влажности.

**Формат запросов:**

HTTP POST 

URL: /api/v1/имя_исполняющего_устройства/id

body:
```
{
    "temperature": 2500,
    "humidity": 5000,
}
```

**Формат ответов:**

HTTP 200 
<!-- [[[end]]] -->